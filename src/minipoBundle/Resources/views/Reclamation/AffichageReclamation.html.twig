{% extends 'base.html.twig' %}
{% block Reclamation %}
    <li>  <a class="has-arrow waves-effect waves-dark"  aria-expanded="false"><i class="mdi mdi-file-document-box"></i><span class="hide-menu">Gestion Reclamtion </span></a>
        <ul aria-expanded="false" class="collapse">
            <li><a href="{{ path('minipo_AfficherToutesReclamationEmploye') }}">Reclamations employe  </a></li>
            <li><a href="{{ path('minipo_AfficherToutesReclamation') }}">Reclamations Client </a></li>
            <li><a href="/">Statistique</a></li>
            <li><a href="/">Modern</a></li>
        </ul>
    </li>
{% endblock  %}
{% block reclamationclient   %}

{#<Table border="1">
    <tr>
        <th>id</th>
        <th>type</th>
        <th>Objet</th>
        <th>Description</th>
        <th>Date </th>
        <th>Etat </th>
        <th>Reponse</th>
        <th>suppression</th>
    </tr>
    {% for elt in reclamation  %}
    <tr>



        <td> {{ elt.id.id }}</td>
        <td> {{ elt.type}}</td>
        <td> {{ elt.objet}}</td>
        <td> {{ elt.description}}</td>
        <td> {{ elt.dater|date}}</td>
        <td> {{ elt.etatr }}</td>
        <td> {{ elt.Reponse}} </td>
        <td><a href="{{ path('minipo_SupprimerReclamation',{'etatr':elt.etatr}) }}">
                <button>supprimer</button></a></td>
        {% endfor  %}
    </tr>

</Table>#}



                    {#<label>Search: <input type="search" class="" placeholder="" aria-controls="example23" name="etatr"></label>
                    <a href="{{ path('minipo_RechercheReclamation') }}" data-toggle="tooltip" data-original-title="Close"> <i class="fa fa-close text-danger"></i> </a>
                    <ul>
                        <li>
                            <a href="{{ path('minipo_RechercheReclamation') }}" data-toggle="tooltip" data-original-title="Close">
                        </li>
                    </ul>#}



                {#
                  <!-- jQuery is necessary -->
                  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

                  <script type="text/javascript">
                      jQuery(document).ready(function() {
                          var searchRequest = null;
                          $("#search").keyup(function() {
                              var minlength = 3;
                              var that = this;
                              var value = $(this).val();
                              var entitySelector = $("#entitiesNav").html('');
                              if (value.length >= minlength ) {
                                  if (searchRequest != null)
                                      searchRequest.abort();
                                  searchRequest = $.ajax({
                                      type: "GET",
                                      url: "{{ path('minipo_search') }}",
                                      data: {
                                          'q' : value
                                      },
                                      dataType: "text",
                                      success: function(msg){
                                          //we need to check if the value is the same
                                          if (value===$(that).val()) {
                                              var result = JSON.parse(msg);
                                              $.each(result, function(key, arr) {
                                                  $.each(arr, function(id, value) {
                                                      if (key === 'entities') {
                                                          if (id !== 'error') {
                                                              {#entitySelector.append('<li><a href={{ path('minipo_showdetailed',{'id':idr}) }}">'+value+'</a></li>');
                                                          } else {
                                                              entitySelector.append('<li class="errorLi">'+value+'</li>');
                                                          }
                                                      }
                                                  });
                                              });
                                          }
                                      }
                                  });
                              }
                          });
                      });
                  </script>#}


                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Reclamation Employe</h4>
                                <h6 class="card-subtitle">Liste des Reclamations Employe</h6>
                                <div class="row m-t-40">
                                    <!-- Column -->
                                    <div class="col-md-6 col-lg-3 col-xlg-3">
                                        <div class="card card-inverse card-info">
                                            <div class="box bg-info text-center">
                                                <h1 class="font-light text-white">2,064</h1>
                                                <h6 class="text-white">Total Reclamation </h6>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-3 col-xlg-3">
                                        <div class="card card-success card-inverse">
                                            <div class="box text-center">
                                                <h1 class="font-light text-white">1,738</h1>
                                                <h6 class="text-white">Total  traiter</h6>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6 col-lg-3 col-xlg-3">
                                        <div class="card card-inverse card-danger">
                                            <div class="box text-center">
                                                <h1 class="font-light text-white">1,738</h1>
                                                <h6 class="text-white">Total Non Traiter</h6>
                                            </div>
                                        </div>
                                    </div>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                        <tr>
                            <th>Nom</th>
                            <th>Categorie</th>
                            <th>Objet</th>
                            <th>Description</th>
                            <th>Image</th>
                            <th>Reponse</th>
                            <th>Date </th>
                            <th>Etat </th>
                            <th class="text-nowrap">Action</th>
                        </tr>
                        </thead>
                        {% for elt in reclamation  %}
                        <tbody>

                        <tr>
                            <td> {{ elt.id.id}}</td>
                            <td> {{ elt.idcatrec.nom }}</td>
                            <td> {{ elt.objet}}</td>
                            <td> {{ elt.description}}</td>
                            <td width="200px"> <img class="img-fluid"width="30%" src="{{ asset('uploads/post/' ~ elt.image) }}" alt=""></td>
                            <td> {{ elt.Reponse}} </td>
                            <td> {{ elt.dater|date()}}</td>
                            <td>
                                {% if  elt.etatr is same as ('traiter')%}
                                <div class="label label-table label-success">{{ elt.etatr }}</div>
                                {%endif%}
                                {% if  elt.etatr is same as ('non traiter')%}
                                    <div class="label label-table label-danger">{{ elt.etatr }}</div>
                                {%endif%}
                            </td>


                            <td class="text-nowrap">
                                <a href="{{ path('minipo_ModifierEtatReclamation',{'id':elt.idr}) }}" data-toggle="tooltip" data-original-title="Edit"> <i class="fa fa-pencil text-inverse m-r-10"></i> </a>
                                <a href="{{ path('minipo_SupprimerReclamation',{'etatr':elt.etatr}) }}" data-toggle="tooltip" data-original-title="Close"> <i class="fa fa-close text-danger"></i> </a>
                            </td>
                            {% endfor  %}



                        </tr>

                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

  {# minipo_SupprimerReclamation:
      path:   /afficher/supprimer/{etatr}
                  defaults: { _controller: minipoBundle:ServiceReclamationClient:SupprimerReclamation}#}